{"ast":null,"code":"/**\n * Internal context keep returning v1 format\n * to not break compatibility with logs data format\n */\nexport function startInternalContext(applicationId, session, parentContexts) {\n  return {\n    get: function get(startTime) {\n      var viewContext = parentContexts.findView(startTime);\n\n      if (session.isTracked() && viewContext && viewContext.session.id) {\n        var actionContext = parentContexts.findAction(startTime);\n        return {\n          application_id: applicationId,\n          session_id: viewContext.session.id,\n          user_action: actionContext ? {\n            id: actionContext.action.id\n          } : undefined,\n          view: viewContext.view\n        };\n      }\n    }\n  };\n}","map":{"version":3,"sources":["../../src/domain/internalContext.ts"],"names":[],"mappings":"AAKA;;;AAGG;AACH,OAAM,SAAU,oBAAV,CAA+B,aAA/B,EAAsD,OAAtD,EAA2E,cAA3E,EAAyG;AAC7G,SAAO;AACL,IAAA,GAAG,EAAE,aAAC,SAAD,EAAmB;AACtB,UAAM,WAAW,GAAG,cAAc,CAAC,QAAf,CAAwB,SAAxB,CAApB;;AACA,UAAI,OAAO,CAAC,SAAR,MAAuB,WAAvB,IAAsC,WAAW,CAAC,OAAZ,CAAoB,EAA9D,EAAkE;AAChE,YAAM,aAAa,GAAG,cAAc,CAAC,UAAf,CAA0B,SAA1B,CAAtB;AACA,eAAO;AACL,UAAA,cAAc,EAAE,aADX;AAEL,UAAA,UAAU,EAAE,WAAW,CAAC,OAAZ,CAAoB,EAF3B;AAGL,UAAA,WAAW,EAAE,aAAa,GACtB;AACE,YAAA,EAAE,EAAE,aAAa,CAAC,MAAd,CAAqB;AAD3B,WADsB,GAItB,SAPC;AAQL,UAAA,IAAI,EAAE,WAAW,CAAC;AARb,SAAP;AAUD;AACF;AAhBI,GAAP;AAkBD","sourceRoot":"","sourcesContent":["/**\n * Internal context keep returning v1 format\n * to not break compatibility with logs data format\n */\nexport function startInternalContext(applicationId, session, parentContexts) {\n    return {\n        get: function (startTime) {\n            var viewContext = parentContexts.findView(startTime);\n            if (session.isTracked() && viewContext && viewContext.session.id) {\n                var actionContext = parentContexts.findAction(startTime);\n                return {\n                    application_id: applicationId,\n                    session_id: viewContext.session.id,\n                    user_action: actionContext\n                        ? {\n                            id: actionContext.action.id,\n                        }\n                        : undefined,\n                    view: viewContext.view,\n                };\n            }\n        },\n    };\n}\n//# sourceMappingURL=internalContext.js.map"]},"metadata":{},"sourceType":"module"}